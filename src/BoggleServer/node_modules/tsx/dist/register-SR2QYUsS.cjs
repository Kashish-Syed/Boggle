"use strict";var p=require("node:module"),m=require("node:worker_threads"),f=require("node:url"),u=typeof document<"u"?document.currentScript:null;const l=(r,t,e)=>{const o=t.startsWith("file://")?t:f.pathToFileURL(t),s=new URL(r,o);return s.searchParams.set("tsx-namespace",e),s.toString()},g=r=>(t,e)=>{if(!e)throw new Error("The current file path (import.meta.url) must be provided in the second argument of tsImport()");return import(l(t,e,r))},v=r=>{if(!p.register)throw new Error(`This version of Node.js (${process.version}) does not support module.register(). Please upgrade to Node v18.9 or v20.6 and above.`);const{sourceMapsEnabled:t}=process;process.setSourceMapsEnabled(!0);const{port1:e,port2:o}=new m.MessageChannel;p.register(`./esm/index.mjs?${Date.now()}`,{parentURL:typeof document>"u"?require("url").pathToFileURL(__filename).href:u&&u.src||new URL("register-SR2QYUsS.cjs",document.baseURI).href,data:{namespace:r?.namespace,port:o},transferList:[o]});const s=r?.onImport,n=s&&(i=>{i.type==="load"&&s(i.url)});n&&(e.on("message",n),e.unref());const a=()=>(t===!1&&process.setSourceMapsEnabled(!1),n&&e.off("message",n),e.postMessage("deactivate"),new Promise(i=>{const c=d=>{d.type==="deactivated"&&(i(),e.off("message",c))};e.on("message",c)}));return r?.namespace&&(a.import=g(r.namespace),a.unregister=a),a};exports.register=v;
